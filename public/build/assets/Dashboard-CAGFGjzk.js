import{d as s,k as g,p as b,e as c,o as i,a as r,f as v,t as f,l as m,q as p,B as P}from"./app-CFG4GA0H.js";const q={class:"space-y-4"},N={key:0},B={class:"grid gap-2"},C={key:1},O={__name:"Dashboard",setup(E){const o=s(null),x=s(!1),l=s("0x0000000000000000000000000000000000000000"),u=s("0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701"),d=s("1"),t=s(null);let h,w;async function y(){if(!window.ethereum)throw new Error("No wallet found");await window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),h=new P(window.ethereum),w=await h.getSigner(),o.value=await w.getAddress();const e="0x279f";try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}catch(a){if(a.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:e,chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"MON",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}]});else throw a}x.value=!0}async function _(){const e=new URL("https://testnet-pathfinder.monorail.xyz/v4/quote");return e.searchParams.set("source","2871175662697871"),e.searchParams.set("from",l.value),e.searchParams.set("to",u.value),e.searchParams.set("amount",d.value),e.searchParams.set("sender",o.value),e.searchParams.set("max_slippage","10"),await(await fetch(e)).json()}g(()=>{var e;return((e=t.value)==null?void 0:e.spender)&&l.value!==b});async function k(){var a;if(t.value=await _(),!((a=t.value)!=null&&a.transaction)){alert("Quote failed: "+JSON.stringify(t.value));return}const e={from:o.value,to:t.value.transaction.to,data:t.value.transaction.data,value:t.value.transaction.value};await window.ethereum.request({method:"eth_sendTransaction",params:[e]})}return(e,a)=>(i(),c("div",q,[r("button",{onClick:y,class:"px-4 py-2 rounded bg-black text-white"}," Connect Wallet "),o.value?(i(),c("div",N,"Account: "+f(o.value),1)):v("",!0),r("div",B,[m(r("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>l.value=n),placeholder:"from token address",class:"border p-2 rounded"},null,512),[[p,l.value]]),m(r("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>u.value=n),placeholder:"to token address",class:"border p-2 rounded"},null,512),[[p,u.value]]),m(r("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>d.value=n),placeholder:"amount (human readable)",class:"border p-2 rounded"},null,512),[[p,d.value]])]),t.value?(i(),c("pre",C,f(JSON.stringify(t.value,null,2)),1)):v("",!0),r("button",{onClick:k,class:"px-4 py-2 rounded bg-green-600 text-white"}," Swap ")]))}};export{O as default};
